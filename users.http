### Smart Accident Report System - Users API Testing

@baseUrl = http://localhost:3000
@adminToken = your_admin_token_here
@officerToken = your_officer_token_here

###############################################
# USERS MODULE ENDPOINTS
###############################################

### 1. Create User (Admin Only)
POST {{baseUrl}}/users
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "fullName": "Officer Jane Smith",
  "email": "officer.jane@police.gov",
  "password": "SecurePass123!",
  "phoneNumber": "+1234567890",
  "role": "officer",
  "isActive": true
}

### 2. Create Emergency Responder
POST {{baseUrl}}/users
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "fullName": "Mike Johnson",
  "email": "mike.johnson@fire.gov",
  "password": "SecurePass123!",
  "phoneNumber": "+1987654321",
  "role": "emergency_responder",
  "isActive": true
}

### 3. Create Regular User
POST {{baseUrl}}/users
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "fullName": "John Citizen",
  "email": "john.citizen@example.com",
  "password": "UserPass123!",
  "phoneNumber": "+1555123456",
  "role": "user",
  "isActive": true
}

### 4. Get All Users (Admin/Officer)
GET {{baseUrl}}/users
Authorization: Bearer {{adminToken}}

### 5. Get Users with Pagination
GET {{baseUrl}}/users?page=1&limit=10
Authorization: Bearer {{adminToken}}

### 6. Search Users by Name
GET {{baseUrl}}/users?search=john
Authorization: Bearer {{adminToken}}

### 7. Filter Users by Role
GET {{baseUrl}}/users?role=officer
Authorization: Bearer {{adminToken}}

### 8. Filter Active Users
GET {{baseUrl}}/users?isActive=true
Authorization: Bearer {{adminToken}}

### 9. Complex Query with Multiple Filters
GET {{baseUrl}}/users?role=officer&isActive=true&search=jane&page=1&limit=5
Authorization: Bearer {{adminToken}}

### 10. Get User by ID
GET {{baseUrl}}/users/uuid-here
Authorization: Bearer {{adminToken}}

### 11. Get Users by Role
GET {{baseUrl}}/users/role/officer
Authorization: Bearer {{adminToken}}

### 12. Get Active Users Only
GET {{baseUrl}}/users/active
Authorization: Bearer {{adminToken}}

### 13. Get User Statistics (Admin Only)
GET {{baseUrl}}/users/stats
Authorization: Bearer {{adminToken}}

### 14. Update User
PATCH {{baseUrl}}/users/uuid-here
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "fullName": "Jane Doe Smith",
  "phoneNumber": "+1234567899",
  "isActive": true
}

### 15. Change User Role
PATCH {{baseUrl}}/users/uuid-here
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "role": "admin"
}

### 16. Deactivate User
PATCH {{baseUrl}}/users/uuid-here/deactivate
Authorization: Bearer {{adminToken}}

### 17. Activate User
PATCH {{baseUrl}}/users/uuid-here/activate
Authorization: Bearer {{adminToken}}

### 18. Delete User (Admin Only)
DELETE {{baseUrl}}/users/uuid-here
Authorization: Bearer {{adminToken}}

###############################################
# AUTHENTICATION ENDPOINTS (for getting tokens)
###############################################

### Sign Up as Admin (First user)
POST {{baseUrl}}/auth/signup
Content-Type: application/json

{
  "fullName": "System Admin",
  "email": "admin@system.com",
  "password": "AdminPass123!",
  "phoneNumber": "+1234567890",
  "role": "admin"
}

### Sign In as Admin
POST {{baseUrl}}/auth/signin
Content-Type: application/json

{
  "email": "admin@system.com",
  "password": "AdminPass123!"
}

### Sign In as Officer
POST {{baseUrl}}/auth/signin
Content-Type: application/json

{
  "email": "officer.jane@police.gov",
  "password": "SecurePass123!"
}

### Get Current User Profile
GET {{baseUrl}}/auth/profile
Authorization: Bearer {{adminToken}}

###############################################
# ERROR CASES - Testing Validation
###############################################

### Create User with Invalid Email
POST {{baseUrl}}/users
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "fullName": "Test User",
  "email": "invalid-email",
  "password": "SecurePass123!",
  "role": "user"
}

### Create User with Short Password
POST {{baseUrl}}/users
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "fullName": "Test User",
  "email": "test@example.com",
  "password": "short",
  "role": "user"
}

### Create User without Required Fields
POST {{baseUrl}}/users
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "fullName": "Test User"
}

### Update Non-existent User
PATCH {{baseUrl}}/users/00000000-0000-0000-0000-000000000000
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "fullName": "Updated Name"
}

### Access User Endpoint without Token
GET {{baseUrl}}/users

### Access Admin Endpoint with Officer Token
POST {{baseUrl}}/users
Authorization: Bearer {{officerToken}}
Content-Type: application/json

{
  "fullName": "Test User",
  "email": "test@example.com",
  "password": "SecurePass123!",
  "role": "user"
}
